---
title: '배달 규칙 구현'
description: "이 주제에서는 비즈니스 목표를 달성하기 위해 미디어가 전달되는 방식을 사용자 정의할 수 있는 Brightcove의 전달 규칙을 구현하는 방법을 배우게 됩니다."
parent: Getting started 
grandparent: Delivery Rules API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">개요</h2>

<p>게시자는 종종 기술 및 비즈니스상의 이유로 미디어 매니페스트의 콘텐츠 특성을 수정해야 합니다. 이러한 요구 사항을 충족하기 위해 Brightcove는 Dynamic Delivery에서 반환된 매니페스트의 내용을 수정하는 규칙을 적용할 수 있는 프레임워크를 만들었습니다.</p>

<p>배달 규칙은 조건과 작업으로 구성됩니다.</p>
<ul>
  <li>
    <strong>정황</strong> - 특정 행동을 유발하는 "만약" 조건
  </li>
  <li>
    <strong>행위</strong> - 매니페스트 수정 방법을 정의하는 "Then" 매개변수
  </li>
</ul>
<p>배달 규칙에 대한 자세한 내용은 다음을 참조하십시오.</p>
<ul>
  <li>
    <a href="/delivery-rules/getting-started/overview-delivery-rules.html">개요: 배달 규칙</a>
  </li>
  <li>
    <a href="https://player.support.brightcove.com/playback/using-delivery-rules-with-bcp.html">Brightcove Player에서 배달 규칙 사용</a>
  </li>
  <li>
    <a href="https://sdks.support.brightcove.com/features/using-delivery-rules-with-sdks.html">네이티브 SDK와 함께 배달 규칙 사용</a>
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Account_setup">계정 설정</h2>

<p>가격 책정에 대해 알아보고 계정에 이 기능을 활성화하려면 계정 관리자에게 문의하세요.</p>
</section>

<section class="bcls-section">
<h2 id="Applying_rules">규칙 적용</h2>

<p>다음 흐름 다이어그램은 배달 규칙이 적용되는 방식을 보여줍니다.</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/delivery-rules/rules-diagram.png" alt="Delivery rules applied">
  <figcaption class="bcls-caption--image">배달 규칙이 적용됨</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="Conditions">정황</h2>

<p>첫 번째 단계에서 지원되는 "if" 조건에는 다음이 포함됩니다.</p>

<ul>
  <li>
    <p>
      <strong>명시적 요청</strong> - 구성 ID는 생성한 작업의 ID입니다. 이 ID를 사용하여 런타임에 Playback API에 전달합니다. 이 ID는 기본 서비스가 적절한 응답 데이터를 반환하기 위해 Playback API에서 활용하는 결정을 내릴 수 있도록 하는 구성 값에 매핑됩니다.
    </p>
  </li>
  <li>
    <strong>장치 그룹</strong> - 사용자 에이전트 구문 분석에 의해 감지된 장치 유형입니다. 현재 지원되는 그룹은 다음과 같습니다.
    <ul>
      <li>
        기계적 인조 인간
      </li>
      <li>
        애플티비
      </li>
      <li>
        크롬캐스트
      </li>
      <li>
        아이패드
      </li>
      <li>
        아이폰
      </li>
      <li>
        데스크탑 크롬
      </li>
      <li>
        데스크탑 파이어폭스
      </li>
      <li>
        데스크탑 사파리
      </li>
      <li>
        페치티비
      </li>
      <li>
        ios 기타
      </li>
      <li>
        로쿠-7/8
      </li>
      <li>
        스마트폰 일반
      </li>
      <li>
        태블릿-안드로이드
      </li>
      <li>
        태블릿 킨들
      </li>
      <li>
        알려지지 않은
      </li>
    </ul>
    &nbsp;
  </li>
  <li>
    <strong>지리학</strong> - 요청 장치의 물리적 위치:
    <ul>
      <li>
        대륙
      </li>
      <li>
        국가
      </li>
    </ul>
  </li>
</ul>

</section>

<section class="bcls-section">
<h2 id="Actions">행위</h2>

<p>첫 번째 단계에서 지원되는 작업 또는 "then" 매개변수에는 다음이 포함됩니다.</p>

<ul>
  <li>
    <p>
        <strong>미디어 전달 CDN</strong> - 지정된 Dynamic Delivery 계정 내에서 사용하도록 구성된 CDN에서 미디어 세그먼트 전달에 사용할 CDN입니다.
    </p>
  </li>
  <li>
    <strong>변환 특성</strong> - 기본 미디어 변환의 특성을 기반으로 한 필터. 여기에는 다음이 포함됩니다.
    <ul>
      <li>
        최소 비디오 비트 전송률
      </li>
      <li>
        최대 비디오 비트레이트
      </li>
      <li>
        최소 비디오 해상도
      </li>
      <li>
        최대 비디오 해상도
      </li>
      <li>
        최대 오디오 변환 수
      </li>
      <li>
        최대 비디오 변환 수
      </li>
      <li>
        첫 번째 비디오 비트 전송률
      </li>
      <li>
        불연속
      </li>
    </ul>
  </li>
</ul>

</section>

<section class="bcls-section">
<h2 id="Scope">범위</h2>

<p>작업은 두 가지 수준에서 적용할 수 있습니다.</p>
<ul>
  <li>
    <strong>계정</strong> - 특정 고객의 계정에 대한 모든 요청에 적용되는 조치
  </li>
  <li>
    <strong>특정 요청</strong> - 특정 요청에 대해 호출되는 작업
  </li>
</ul>

<p>
  작업은 위에 나열된 순서대로 적용됩니다. 이후 작업은 이전 작업보다 우선 적용됩니다.
</p>

</section>

<section class="bcls-section">
<h2 id="Defining_rules">규칙 정의</h2>

<p>Delivery Rules API를 사용하여 미디어 배달을 사용자 지정합니다.</p>

<h3 id="Delivery_Rules_API">Delivery Rules API</h3>
<p>
  NS <a href="https://apis.support.brightcove.com/delivery-rules/references/reference.html">Delivery Rules API</a>미디어 전달을 제어하기 위한 조건과 작업을 정의할 수 있습니다.
</p>
<p>NS <a href="#API_Response">응답</a>Delivery Rules API에서 다음을 포함합니다. <code translate="No">conditions</code>정렬. 이 배열을 사용하면 여러<code translate="No">if</code> / <code translate="No">then</code>각각의 조건<code translate="No">then</code>하나 또는 그 이상을 가리킨다<a href="#Response_body_for_actions">작업 ID</a> .</p>
<p>추가하거나 삭제할 방법이 없어도<code translate="No">conditions</code> , 업데이트하여 이 작업을 수행할 수 있습니다. <code translate="No">conditions</code>정렬.</p>

<!-- <aside class="bcls-aside bcls-aside--tip">Since each account has one conditions block, you will update the block to add or remove conditions.</aside> -->

<h3>기본 URL</h3>
<p>
  API의 기본 URL은 다음과 같습니다.
</p>
<pre><code class="language-http" translate="No">https://delivery-rules.api.brightcove.com</code></pre>

<h3>계정 경로</h3>
<p>
  모든 경우에 특정 Video Cloud 계정에 대한 요청이 이루어집니다. 따라서 기본 URL에 항상 계정이라는 용어와 계정 ID를 추가합니다.
</p>
<pre><code class="language-http" translate="No">https://delivery-rules.api.brightcove.com/accounts/{accountID}</code></pre>

<h3>권한 부여</h3>
<p>
  요청에 대한 액세스 토큰이 필요하며 Authorization 헤더에 있어야 합니다.
</p>
<pre><code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>
<p>
  액세스 토큰은 Brightcove OAuth 서비스에서 가져와야 하는 임시 OAuth2 액세스 토큰입니다. 클라이언트 자격 증명을 얻고 이를 사용하여 액세스 토큰을 검색하는 방법에 대한 자세한 내용은 다음을 참조하십시오. <a href="/oauth/getting-started/overview-oauth-api-v4.html">브라이트코브 OAuth 개요</a> .
</p>

<h3>권한</h3>
<p>
  Playback Rights API에 대한 요청은 다음에서 이루어져야 합니다. <a href="/oauth/getting-started/overview-oauth-api-v4.html">클라이언트 자격 증명</a>다음 권한으로:
</p>
<ul>
  <li>
    <code translate="No">video-cloud/delivery-rules/read</code>
  </li>
  <li>
    <code translate="No">video-cloud/delivery-rules/all</code>
  </li>
</ul>

<h3>규칙 관리</h3>
<p>
  Delivery Rules API는 다음 요청을 지원합니다. API에 대한 자세한 내용은<a href="https://apis.support.brightcove.com/delivery-rules/references/reference.html">Delivery Rules API 참조</a> .
</p>

<h4>배달 규칙 가져오기</h4>
<p>
  다음 GET 요청을 사용하여 계정에 대한 최신 버전의 배달 규칙을 가져옵니다.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}</code></pre>

<h5 id="API_Response">API 응답</h5>
<p>
  다음은 응답 본문입니다. 배달 규칙에는 조건 집합과 작업 집합이 포함되어 있습니다.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;conditions&quot;: [
    {
      &quot;name&quot;: &quot;MyCondition1&quot;,
      &quot;if&quot;: {
        &quot;device_group&quot;: [
          &quot;ipad&quot;
        ],
        &quot;request_country&quot;: [
          &quot;string&quot;
        ],
        &quot;request_continent&quot;: [
          &quot;AF&quot;
        ]
      },
      &quot;then&quot;: [
        &quot;MyAction1&quot;
      ]
    }
  ],
  &quot;actions&quot;: [
    {
      &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;,
      &quot;properties&quot;: {
        &quot;min_video_bitrate&quot;: 0,
        &quot;max_video_bitrate&quot;: 0,
        &quot;first_video_bitrate&quot;: 0,
        &quot;min_video_resolution&quot;: &quot;string&quot;,
        &quot;max_video_resolution&quot;: &quot;string&quot;,
        &quot;max_video_renditions&quot;: 0,
        &quot;max_audio_renditions&quot;: 0,
        &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
        &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
        &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
        &quot;string&quot;
      ]
    }
    }
  ]
}</code></pre>
<br />

<h4>조건 가져오기</h4>
<p>
  다음 GET 요청을 사용하여 계정에 대한 조건을 가져옵니다.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/conditions</code></pre>
<h5>API 응답</h5>
<p>
  다음은 응답 본문입니다.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">[
  {
    &quot;name&quot;: &quot;MyCondition1&quot;,
    &quot;if&quot;: {
      &quot;device_group&quot;: [
        &quot;ipad&quot;
      ],
      &quot;request_country&quot;: [
        &quot;string&quot;
      ],
      &quot;request_continent&quot;: [
        &quot;AF&quot;
      ]
    },
    &quot;then&quot;: [
      &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;
    ]
  }
]</code></pre>
<br />

<h4>업데이트 조건</h4>
<p>
  다음 PUT 요청을 사용하여 계정 조건을 업데이트합니다.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">PUT /accounts/{accountID}/conditions
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {conditions object}
</code></pre>
<!-- <p>
  For a list of valid fields, see the <a href="#Request_body_for_conditions">Request body for conditions</a> section.
</p> -->
<h4 id="Request_body_for_conditions">조건 요청 본문</h4>
<p>
  다음은 조건에 대한 요청 본문입니다. 이것은 조건 객체의 배열이라는 점에 유의하십시오.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">[
  {
    &quot;name&quot;: &quot;MyCondition1&quot;,
    &quot;if&quot;: {
      &quot;device_group&quot;: [
        &quot;ipad&quot;
      ],
      &quot;request_country&quot;: [
        &quot;string&quot;
      ],
      &quot;request_continent&quot;: [
        &quot;AF&quot;
      ]
    },
    &quot;then&quot;: [
      &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;
    ]
  }
]</code></pre>
<br />
<p>
  조건에 대한 필드 세부 정보는 다음과 같습니다.
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>들</th>
      <th>유형</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">name</code></td>
      <td>끈</td>
      <td>조건의 고유 식별자</td>
    </tr>
    <tr>
      <td><code translate="No">device_group</code></td>
      <td>끈</td>
      <td>사용자 에이전트 구문 분석에 의해 감지된 장치 유형 배열</td>
    </tr>
    <tr>
      <td><code translate="No">request_country</code></td>
      <td>끈</td>
      <td>두 글자 국가 코드의 배열</td>
    </tr>
    <tr>
      <td><code translate="No">request_continent</code></td>
      <td>끈</td>
      <td>두 글자 대륙 코드의 배열</td>
    </tr>
    <tr>
      <td><code translate="No">then</code></td>
      <td>끈</td>
      <td>연결된 작업의 고유 식별자</td>
    </tr>
  </tbody>
</table>

<h4>작업 만들기</h4>
<p>
  다음 POST 요청을 사용하여 계정에 대한 작업을 생성합니다.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">POST /accounts/{accountID}/actions
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {actions object}
</code></pre>
<!-- <p>
  For a list of valid fields, see the <a href="#Request_body_for_actions">Request body for actions</a> section.
</p> -->
<h4 id="Request_body_for_actions">작업 요청 본문</h4>
<p>
  다음은 작업에 대한 요청 본문입니다.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
    &quot;properties&quot;: {
      &quot;min_video_bitrate&quot;: 0,
      &quot;max_video_bitrate&quot;: 0,
      &quot;first_video_bitrate&quot;: 0,
      &quot;min_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_renditions&quot;: 0,
      &quot;max_audio_renditions&quot;: 0,
      &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
      &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
        &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
        &quot;string&quot;
      ]
  }
}</code></pre>

<p>
  다음은 작업에 대한 필드 세부정보입니다.
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>들</th>
      <th>유형</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">properties</code></td>
      <td>물체</td>
      <td>특정 작업에 대해 정의된 속성의 개체</td>
    </tr>
    <tr>
      <td>,<code translate="No">min_video_bitrate</code> <br/>
      <code translate="No">max_video_bitrate</code></td>
      <td>정수</td>
      <td>최소 또는 최대 허용 비디오 비트 전송률(kbps) 설정</td>
    </tr>
    <tr>
      <td><code translate="No">first_video_bitrate</code></td>
      <td>정수</td>
      <td>첫 번째 비디오의 비트 전송률(kbps) 설정</td>
    </tr>
    <tr>
      <td>,<code translate="No">min_video_resolution</code> <br/><code translate="No">max_video_resolution</code></td>
      <td>끈</td>
      <td>최소 또는 최대 허용 비디오 해상도(WxH) 설정</td>
    </tr>
    <tr>
      <td><code translate="No">max_video_renditions</code></td>
      <td>정수</td>
      <td>최대 비디오 변환 수 설정</td>
    </tr>
    <tr>
      <td><code translate="No">max_audio_renditions</code></td>
      <td>정수</td>
      <td>최대 오디오 변환 수 설정</td>
    </tr>
    <tr>
      <td><code translate="No">preferred_cdn_provider</code></td>
      <td>끈</td>
      <td>선호하는 CDN 제공업체 설정</td>
    </tr>
    <tr>
      <td><code translate="No">preferred_cdn_domain</code></td>
      <td>끈</td>
      <td>선호하는 CDN 도메인 설정</td>
    </tr>
    <tr>
      <td><code translate="No">video_codecs</code></td>
      <td>끈</td>
      <td>비디오 코덱 배열</td>
    </tr>
    <tr>
      <td><code translate="No">audio_codecs</code></td>
      <td>끈</td>
      <td>오디오 코덱 배열</td>
    </tr>
  </tbody>
</table>

<h4 id="Response_body_for_actions">작업에 대한 API 응답</h4>
<p>
  다음은 작업에 대한 요청 본문입니다.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
    &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;,
    &quot;properties&quot;: {
      &quot;min_video_bitrate&quot;: 0,
      &quot;max_video_bitrate&quot;: 0,
      &quot;first_video_bitrate&quot;: 0,
      &quot;min_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_renditions&quot;: 0,
      &quot;max_audio_renditions&quot;: 0,
      &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
      &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
       &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
       &quot;string&quot;
      ]
  }
}</code></pre>

<p>
  요청의 작업 필드 외에도 API 응답에는 다음과 같은 생성된 필드가 포함됩니다.
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>들</th>
      <th>유형</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">id</code></td>
      <td>끈</td>
       <td>작업에 대해 시스템에서 생성한 고유 식별자입니다. 이것이<code translate="No">actionID</code>업데이트 및 삭제 방법에 사용됩니다.</td>
    </tr>
  </tbody>
</table>

<h4>작업 가져오기</h4>
<p>
  다음 GET 요청을 사용하여 계정에 대한 작업을 가져옵니다.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/actions</code></pre>
<h5>API 응답</h5>
<p>
  참조<a href="#Response_body_for_actions">작업에 대한 API 응답</a> .
</p>

<h4>작업 가져오기</h4>
<p>
  다음 GET 요청을 사용하여 계정에 대한 특정 작업을 가져옵니다.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/actions/{actionID}</code></pre>
<h5>API 응답</h5>
<p>
  참조<a href="#Response_body_for_actions">작업에 대한 API 응답</a> .
</p>

<h4>작업 업데이트</h4>
<p>
  다음 PUT 요청을 사용하여 계정에 대한 작업을 업데이트합니다.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">PUT /accounts/{accountID}/actions/{actionID}
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {actions object}
</code></pre>
<h5>API 요청</h5>
<p>
  다음은 작업을 업데이트하기 위한 샘플 요청 본문입니다.
</p>
<aside class="bcls-aside bcls-aside--information">NS <code translate="No">id</code>아래 JSON 예제에서 작업 ID입니다. 경로의 작업 ID와 일치해야 합니다.</aside>

<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3edb94645943&quot;,
  &quot;properties&quot;: {
   &quot;custom_properties&quot;: {
    &quot;generate_thumbnails&quot;: false,
    &quot;hls_iframes&quot;: true
   }
  }
 }</code></pre>
<h5>API 응답</h5>
<p>
  다음은 업데이트된 작업에 대한 샘플 응답입니다.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3edb94645943&quot;,
  &quot;properties&quot;: {
   &quot;custom_properties&quot;: {
    &quot;generate_thumbnails&quot;: false,
    &quot;hls_iframes&quot;: true
   }
  }
 }</code></pre>


<h4>작업 삭제</h4>
<p>
  다음 DELETE 요청을 사용하여 계정에 대한 작업을 제거합니다.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">DELETE /accounts/{accountID}/actions/{actionID}</code></pre>


<!-- <p>
  Here is an example of all of the fields you can include in the request body:
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;geo&quot;: {
  &quot;allowed_countries&quot;: [
    &quot;MX&quot;,
    &quot;US&quot;
  ],
  &quot;blocked_countries&quot;: [
    &quot;JP&quot;,
    &quot;CN&quot;
  ],
  &quot;allowed_zip_codes&quot;: [
    &quot;US-90210&quot;
  ],
  &quot;blocked_zip_codes&quot;: [
    &quot;US-72810&quot;
  ],
  &quot;allowed_dmas&quot;: [
    501
  ],
  &quot;blocked_dmas&quot;: [
    803
  ]
},
&quot;allowed_domains&quot;: [
  &quot;www.google.com&quot;,
  &quot;www.brightcove.com&quot;
],
&quot;blocked_domains&quot;: [
  &quot;www.ooyala.com&quot;
],
&quot;start_time&quot;: 1572905011,
&quot;end_time&quot;: 1672905011,
&quot;allowed_ips&quot;: [
  &quot;192.168.1.1&quot;
],
&quot;blocked_ips&quot;: [
  &quot;192.168.1.1&quot;
],
&quot;allowed_days&quot;: [
  &quot;mon&quot;,
  &quot;tue&quot;
],
&quot;allowed_hours&quot;: [
  &quot;5-6&quot;
],
&quot;allow_insecure&quot;: true,
&quot;disabled&quot;: false,
&quot;name&quot;: &quot;Optional playback right name&quot;
}
</code></pre> -->



</section>

<section class="bcls-section">
<h2 id="Limitations">제한 사항</h2>

<p>배달 규칙을 사용할 때 몇 가지 알려진 제한 사항이 있습니다.</p>
<ul>
  <!-- <li>
    <strong>CDN Providers</strong> - A customer may only have one CDN configuration from a given provider. For instance, it will be possible to switch between Akamai and Cloudfront, but not between two separate Akamai configurations.
  </li> -->
  <li>
    <strong>미디어 콘텐츠</strong> - 전송 규칙은 Smooth 또는 pMP4 비디오에서 작동하지 않습니다.
  </li>
  <li>
    <strong>미디어 콘텐츠</strong> - 라이브 비디오에서는 전송 규칙이 작동하지 않습니다.
  </li>
  <li>
    <strong>오디오 전용</strong> - SSAI(서버 측 광고)가 활성화된 배달 규칙에는 비디오 및 오디오 콘텐츠가 모두 필요합니다. 이것은 SSAI 제한 사항입니다.
  </li>
</ul>

</section>

</article>