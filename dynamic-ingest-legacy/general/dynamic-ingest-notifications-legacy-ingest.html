---
title: '동적 수집 알림'
description: '이 주제에서는 수집 작업의 진행 상황에 대한 정보를 제공하는 동적 수집 알림에 대해 알아봅니다. 이 문서는 레거시 수집 시스템에만 적용됩니다. Dynamic Delivery의 경우<a href="/dynamic-ingest/general/notifications-dynamic-delivery-video-cloud.html">동적 수집에 대한 알림</a>'
parent: 'General Information' 
grandparent: <span translate="No">Dynamic Ingest API</span>레거시 레이아웃: 스테이징
--- <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="diAPI">Dynamic Ingest API 알림</h2>
    
    <p>수집 프로세스의 결과에 대한 알림을 수신하기 위해 하나 이상의 콜백 URL을 지정할 수 있습니다. 지정하는 URL은 POST 요청을 수락할 수 있는 앱용이어야 합니다. 알림은 JSON 형식으로 전송됩니다.</p>
    
    <aside class="bcls-aside bcls-aside--information">
    <h3>노트</h3>
    
    <ul>
      <li>오류 알림에 대해 최대 10명의 가입자가 지원됩니다. 알림을 보낼 URL을 10개 이상 포함할 수 있지만 처음 10개만 처리됩니다.</li>
      <li>슬래시(/)로 끝나는 URL은 허용되지 않습니다. 예를 들어 URL "https://my.domain.com/notification-receiver"는 작동하지만 "https://my.domain.com/notification-receiver/"는 작동하지 않습니다.</li>
      <li>또는 다음을 사용할 수 있습니다. <a href="/cms/references/reference.html#api-videoGroup-Get_Status_of_Ingest_Jobs"> CMS API의 상태 API</a>특정 비디오에 대한 수집 작업의 상태를 가져옵니다.</li>
      <li>HTTP2에 구축된 서버의 알림 처리기는 현재 지원되지 않습니다. HTTP2 서버로 보낸 알림은 오류를 반환하지 않고 전달되지 않을 수 있습니다.</li>
    </ul>
    </aside>
    
    <h3>설정</h3>
    
    <p>여기 예가 있습니다.</p>
    
    <ul>
      <li>pub id가 57838016001인 사용자</li>
      <li>Dynamic Ingest를 사용하여 https://s3.amazonaws.com/bucket/mysourcevideo.mp4에 있는 소스 비디오 파일을 업로드하려고 합니다.</li>
      <li>비디오 ID가 5199670523001인 카탈로그의 기존 제목을 업로드하려고 합니다.</li>
      <li>고해상도 프로필 사용</li>
      <li>각각 http://host1/path1 및 http://host2/path2에 있는 두 끝점에서 콜백을 수신하려고 합니다.</li>
    </ul>
    
    <p>DI 요청은 다음과 같습니다.</p>
    
    <h4>POST 요청</h4>
    <textarea class="bcls-code">https://ingest.api.brightcove.com/v1/accounts/57838016001/videos/5199670523001/ingest-requests</textarea>
    
    <h4>요청 본문</h4>
    <textarea class="bcls-code" style="height:10em;">{ "master": { "url": "https://s3.amazonaws.com/bucket/mysourcevideo.mp4" } , "프로필": "고해상도", "콜백": ["http://host1/path1", "http://host2/path2"] }
        </textarea>
    
    <h3>샘플 알림</h3>
    
    <p>알림은 JSON으로 요청 본문의 알림과 함께 POST 요청으로 전송됩니다. <sup> <strong><a href="#note1">[1]</a></strong> </sup>. 다음은 몇 가지 샘플 알림입니다.</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "accountId": "57838016001",
        "entityType": "ASSET",
        "version": "1",
        "status": "SUCCESS",
        "videoId": "5199670523001",
        "entity": "5199679295001",
        "action": "CREATE",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "action": "CREATE",
        "status": "SUCCESS",
        "entityType": "DIGITAL_MASTER",
        "videoId": "5199670523001",
        "entity": "5199670523001",
        "accountId": "57838016001",
        "version": "1",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "entityType": "ASSET",
        "status": "SUCCESS",
        "action": "CREATE",
        "entity": "5199680423001",
        "profileRefId": "ts7",
        "version": "1",
        "accountId": "57838016001",
        "videoId": "5199670523001",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd",
        "accountId": "57838016001",
        "version": "1",
        "status": "SUCCESS",
        "entityType": "TITLE",
        "entity": "5199670523001",
        "videoId": "5199670523001",
        "action": "CREATE"
    }</code></pre>
    
    <h4>노트</h4>
    
    <ul>
      <li id="note1"><sup>[1]<strong></strong> </sup> 예외: DRM 패키지 콘텐츠에 대한 모든 알림은 키/값 쌍으로 반환됩니다. 이 경우, <code translate="No">Content-Type</code>헤더는<code translate="No">application/x-www-form-urlencoded</code> . 그렇지 않으면<code translate="No">Content-Type</code>될거야<code translate="No">application/json</code></li>
    </ul>
    
    <h3>알림 필드</h3>
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>안건</th>
          <th>설명</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">status</code></td>
          <td>될거야<code translate="No">FAILED</code>변환의 수집 또는 생성이 성공하지 못한 경우<code translate="No">SUCCESS</code>요청이 성공한 경우</td>
        </tr>
        <tr>
          <td><code translate="No">accountId</code></td>
          <td>계정 아이디</td>
        </tr>
        <tr>
          <td><code translate="No">videoId</code></td>
          <td>비디오 아이디</td>
        </tr>
        <tr>
          <td><code translate="No">jobId</code></td>
          <td>Dynamic Ingest 요청의 작업 ID</td>
        </tr>
        <tr>
          <td style="vertical-align:top;"><code translate="No">profileRefId</code></td>
          <td>
          <p>비디오 변환의 경우 이것은<code translate="No">reference id</code>수집 프로필에서 변환에 대해 지정했습니다.</p>
    
          <p>매니페스트의 경우<code translate="No">profileRefId</code>매니페스트 유형을 나타냅니다.</p>
    
          <ul>
            <li><code translate="No">HlsManifest</code> HLS NG 매니페스트의 경우</li>
            <li><code translate="No">HdsManifest</code> HDS 매니페스트의 경우</li>
            <li><code translate="No">DashManifest</code> DASH 매니페스트의 경우(2 - 매니페스트 자산 중 하나는 MAPI에서 사용하는 데 사용되고 다른 하나는 CMS API에서 사용하는 데 사용됨)</li>
            <li><code translate="No">SmoothIsmManifest</code>부드러운 매니페스트의 경우(2 - 매니페스트 자산 중 하나는 MAPI에서 사용하는 데 사용되고 다른 하나는 CMS API에서 사용하는 데 사용됨)</li>
          </ul>
          </td>
        </tr>
        <tr>
          <td><code translate="No">entity</code></td>
          <td>존재하는 경우 수집되거나 실패한 자산의 Video Cloud ID(비디오 객체가 Video Cloud에서 성공적으로 생성된 경우)</td>
        </tr>
        <tr>
          <td><code translate="No">entityType</code></td>
          <td>보고된 자산의 종류 - 예: TITLE(비디오), DIGITAL_MASTER, ASSET(변환, 캡션 파일 또는 이미지)</td>
        </tr>
        <tr>
          <td><code translate="No">errorMessage</code></td>
          <td>수집이 실패한 경우 수집에 실패한 이유에 대한 설명</td>
        </tr>
        <tr>
          <td><code translate="No">version</code></td>
          <td>항상 같은 문자열<code translate="No">"1"</code></td>
        </tr>
        <tr>
          <td><code translate="No">action</code></td>
          <td>발생한 작업(예: CREATE)</td>
        </tr>
      </tbody>
    </table>
    
    <h3>알림 해석</h3>
    
    <p>다음을 포함하는 알림<code translate="No">"action": "CREATE"</code>그리고<code translate="No">"status": "SUCCESS"</code>프로세스의 완료를 나타냅니다.</p>
    
    <ul>
      <li>만약<code translate="No">entityType</code> ~이다<code translate="No">TITLE</code> , 인제스트된 동영상 처리가 완료됩니다.</li>
      <li>만약<code translate="No">entityType</code> ~이다<code translate="No">ASSET</code> , 변환, 이미지, 매니페스트 또는 WebVTT 파일이 비디오에 성공적으로 추가되었습니다.</li>
    </ul>
    
    <p class="BCL-aside">참고: <code translate="No">"status": "SUCCESS"</code>에<strong>제목</strong>처리가 완료되었음을 나타내지만 반드시 모든 변환이 성공적으로 생성되었음을 의미하지는 않습니다. 비디오의 동적 수집이 성공했는지 확인하려면 다음을 참조하십시오. <a href="/dynamic-ingest/general/get-status-dynamic-ingest-requests-dynamic-delivery.html">동적 수집 요청 상태 가져오기</a></p>
    </section>
    
    <section class="bcls-section">
    <h2 id="sampleApp">기본 샘플 앱</h2>
    
    <p>아래는 간단한 로깅 앱의 코드입니다. <span translate="No">Dynamic Ingest API</span>공고. 이 앱은 PHP로 작성되었지만 앱에 공개 URL이 있고 http(s) POST 요청을 처리할 수 있는 한 모든 언어를 사용할 수 있습니다.</p>
    
    <p>이 앱이 생성하는 로그 파일을 볼 수 있습니다<a href="//solutions.brightcove.com/bcls/di-api/di-log.txt">여기.</a></p>
    
    <p class="BCL-aside">참고: 이 앱을 직접 구현하려는 경우 앱에 로그 파일에 쓸 수 있는 권한이 있는지 확인해야 합니다. 또한 로그 파일은 빠르게 커질 수 있음을 기억하십시오. 아마도 정기적으로 비우고 싶을 것입니다.</p>
    
    <pre class="line-numbers">
    <code class="language-php">&lt;?php // POST는 JSON 데이터에 대해 작동하지 않습니다. $problem = "오류 없음"; 노력하다{ $json = file_get_contents('php://input'); $decoded = json_decode($json, true); }잡기(예외 $e) { $problem = $e-&gt;getMessage(); } // 알림을 예쁜 인쇄된 JSON으로 변환 $notification = json_encode($decoded, JSON_PRETTY_PRINT); $logEntry = $알림. "\\n알림 수신 오류: ".$problem. "\\n---
------
------
------
------
----\\n"; // 마지막으로, 로그 파일을 찾을 수 있는 위치를 PHP에 알려주고 PHP에 이 파일을 열고 // 이전에 생성한 문자열을 추가합니다. $logFileLocation = "di-log.txt"; $fileHandle = fopen($logFileLocation, 'a') 또는 die("-1"); fwrite($fileHandle, $logEntry); fclose($fileHandle); // 앱을 직접 탐색하면 아래 줄이 표시됩니다. echo "Dynamic Ingest callback app is running"; ?&gt;</code></pre>
    </section>
    </article>
  