---
title: '비디오 사이트맵 생성기'
description: '이 샘플은 CMS API를 사용하여 동영상 사이트맵을 생성하는 방법을 보여줍니다. '
parent: 'Code Samples' 
grandparent: CMS API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">소개</h2>

    <aside class="bcls-aside bcls-aside--information">이 샘플 및 관련 코드는 프로덕션 개발을 위한 가이드로 제공됩니다. 코드는 프로덕션 용도로 인증되지 않았으며 공식적으로 지원되지 않습니다.</aside>

    <p>이 앱을 사용하기 전에 읽어야 할<a href="https://studio.support.brightcove.com/general/making-your-video-content-indexable.html">비디오 콘텐츠를 인덱싱 가능하게 만들기</a>동영상 사이트맵의 목적과 CMS API를 사용하여 사이트맵 생성을 자동화하기 위한 전략을 더 잘 이해합니다. 사이트맵용 XML을 생성하는 것은 매우 간단합니다. 가장 큰 문제는 각 동영상에 대해 고유한 URL을 포함해야 하고<span translate="No"> CMS API</span>이 정보에 대한 자동 액세스 권한이 없습니다. 이를 극복하기 위해 다음과 같은 몇 가지 작업을 수행할 수 있습니다.</p>

    <ol>
      <li>비디오가 게시되는 URL을 비디오 메타데이터에 추가합니다. 이를 수행하는 가장 간단한 방법은<a href="https://studio.support.brightcove.com/admin/creating-custom-metadata-fields.html">사용자 정의 메타데이터 필드</a>에 URL을 저장합니다.</li>
      <li>비디오를 지정하는 URL 매개변수를 사용하여 단일 페이지에서 비디오를 호스팅하십시오. <code translate="No">id</code>또는<code translate="No">reference_id</code>페이지의 사용자 정의 JavaScript가 비디오를 플레이어에 로드하는 데 사용할 것입니다.
        <p>페이지의 특정 URL 매개변수 값을 가져오는 방법에는 여러 가지가 있습니다. 다음은 일부 샘플 앱에서 사용하는 기능입니다.</p>

        <pre class="line-numbers">
            <code class="language-javascript" translate="No">/**
             * gets value of a URL param on current page URL if exists
             * @param {string} name the param you want the value of
             * @return {string} result value of param if exists or null
             */
            function getURLparam(name) {
                var regex,
                    results;
                name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                regex = new RegExp("[\\?&amp;]" + name + "=([^&amp;#]*)");
                results = regex.exec(location.search);
                return results === null ? null : decodeURIComponent(results[1].replace(/\+/g, " "));
            }</code></pre>

        <p>일단 당신이 가지고<code translate="No">id</code>또는<code translate="No">reference_id</code> , 플레이어에 추가해야 합니다. 이를 수행하는 방법은 표준( <code translate="No">iframe</code> ) 또는 고급(인페이지) 플레이어 임베드 코드입니다. 아마도 가장 간단하고 안전한 방법은&nbsp;에게<a href="https://player.support.brightcove.com/code-samples/brightcove-player-sample-loading-player-dynamically.html">플레이어를 동적으로 로드</a> (또는 어떤 이유로 ID가 있는 URL 매개변수가 없는 경우).</p>

        <p>이 목적으로 사용할 수 있는 단일 HTML 페이지의 예는<a href="#Single_page">단일 페이지</a>아래 섹션.</p>
      </li>
    </ol>

    <p>아래 샘플 앱을 사용하면 두 가지 방법 중 하나를 사용할 수 있습니다. 적절한 필드에 정보를 입력하여 어느 방법인지 알려면 됩니다.</p>

    <h3>샘플 앱에 대한 참고 사항:</h3>

    <ol>
      <li>앱에서 요청합니다. <span translate="No">Analytics API</span>항상 비디오 조회수를 얻으려면 제공한 클라이언트 자격 증명에 Analytics API에 대한 권한이 포함되어 있지 않으면 앱이 실패합니다.</li>
      <li>포함할 수 있는 최대 동영상 수는 50,000개이며 파일 크기에 50MB 제한이 있습니다. 이 제한은 50,000개 미만의 동영상에 도달할 수 있습니다. 포함할 동영상이 그보다 많으면 여러 사이트맵으로 분할하고 사이트맵 색인 파일을 추가해야 합니다. 보다<a href="https://support.google.com/webmasters/answer/80471"> Google 사이트맵 문서</a>자세한 내용은.</li>
      <li>샘플 앱에서 생성한 사이트맵에는 동영상용 선택적 태그 중 일부가 포함되어 있지 않습니다(관련 정보는 위에서 참조한 Google 문서 참조). 이를 포함하려면 이 앱에서 코드를 가져와 수정된 버전을 만들 수 있습니다. JavaScript 및 HTML 코드에는 수행해야 할 작업을 나타내는 주석이 있습니다.
        <table class="bcls-table">
          <caption class="bcls-caption--table">옵션 태그 포함 여부</caption>
          <thead class="bcls-table__head">
            <tr>
              <th>포함된 태그</th>
              <th>태그가 포함되지 않음</th>
            </tr>
          </thead>
          <tbody class="bcls-table__body">
            <tr>
              <td>
                <ul>
                  <li>player_loc</li>
                  <li>지속</li>
                  <li>만료일(해당되는 경우)</li>
                  <li>조회수</li>
                  <li>발행일</li>
                  <li>가족 친화적 인</li>
                  <li>(지역) 제한(해당되는 경우)</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>content_loc</li>
                  <li>평가</li>
                  <li>플랫폼</li>
                  <li>가격</li>
                  <li>require_subscription</li>
                  <li>업로더</li>
                  <li>라이브</li>
                  <li>꼬리표</li>
                  <li>범주</li>
                  <li>Gallery_loc</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>동영상은 다음과 같이 필요한 조건을 충족하지 않으면 건너뜁니다.
        <ul>
          <li>비디오 페이지 URL을 사용자 정의 필드에 저장하는 경우 해당 사용자 정의 필드에 대한 값이 없는 모든 비디오</li>
          <li>단일 페이지를 사용하여 동영상을 호스팅하는 경우<code translate="No">reference_id</code>포함해야 하며 동영상에는<code translate="No">reference_id</code></li>
          <li>동영상에 미리보기 이미지가 없습니다.</li>
          <li>비디오에 MP4 변환이 없습니다.</li>
          <li>동영상이 비활성 상태입니다.</li>
          <li>비디오는 미래 날짜에 시작될 예정입니다.</li>
          <li>동영상이 현재 날짜 이전에 종료되도록 예약되었습니다.</li>
        </ul>

        <p>건너뛴 모든 비디오에 대해 이유와 비디오 ID를 나타내는 메시지를 브라우저 콘솔에 기록합니다.</p>
      </li>
    </ol>

    <p>마지막으로 사이트맵을 생성한 후 유효성을 검사하려는 경우 웹에 이를 위한 몇 가지 무료 도구가 있습니다. 예를 들면 다음과 같습니다.</p>

    <p><a href="https://www.inspyder.com/free/SitemapValidator.aspx">무료 사이트맵 검사기</a></p>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="getCredentials">자격 증명 가져오기</h2>
      </summary>

      <p>사용하려면<span translate="No"> CMS API</span>적절한 자격 증명이 필요합니다.</p>

      <p>대부분의 경우 자격 증명을 얻는 가장 쉬운 방법은 Studio Admin API 인증 섹션을 사용하는 것입니다(계정에 대한 관리자 권한 필요). 보다<a href="/general/managing-api-authentication-credentials.html"> API 인증 자격 증명 관리</a>자세한 내용은. 대부분의 경우 모든 권한을 얻기를 원할 것입니다. <span translate="No"> CMS API</span>작업:</p>

      <figure class="bcls-figure"><img class="bcls-image" alt="CMS API Permissions" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/cms-api/cms-permissions.png" />
        <figcaption class="bcls-caption--image">CMS API 권한</figcaption>
      </figure>

      <p>필요한 권한을 Studio에서 사용할 수 없거나 OAuth API에서 직접 권한을 가져오려면 원하는 권한을 사용하십시오. <strong>클라이언트 자격 증명 가져오기</strong>아래 나열된 문서. 어떤 옵션을 선택하든 올바른 작업 권한을 요청해야 합니다. 다음을 cURL, Postman 또는 온라인 앱과 함께 사용하여 CMS API에 대한 모든 권한을 얻을 수 있습니다.</p>

      <pre class="line-numbers">
              <code class="language-json" translate="No">"operations": [
                "video-cloud/video/all",
                "video-cloud/playlist/all",
                "video-cloud/sharing-relationships/all",
                "video-cloud/notifications/all"
                "video-cloud/analytics/read"
              ]</code></pre>

      <ul>
        <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">인증: cURL을 사용하여 클라이언트 자격 증명 가져오기</a></li>
        <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">인증: Postman을 사용하여 클라이언트 자격 증명 가져오기</a></li>
        <li><a href="/oauth/code-samples/oauth-api-sample-create-client-credentials.html">OAuth API 샘플: 클라이언트 자격 증명 생성</a></li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="sampleApp">샘플 앱</h2>
    <h3>소스 코드</h3>
    <p>이 샘플과 관련된 모든 코드 찾기<a href="https://github.com/BrightcoveLearning/18739-cms-api-sample-video-sitemap-generator"> GitHub 저장소</a> .</p>
    <h3>샘플 앱</h3>
    <p class="codepen" data-height="1200" data-theme-id="34967" data-default-tab="result" data-user="rcrooks1969" data-slug-hash="VRLNJp" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="CMS API Sample: Video Sitemap Generator"><span>펜 보기<a href="https://codepen.io/team/rcrooks1969/pen/VRLNJp/"><span translate="No"> CMS API</span>견본: 비디오 사이트맵 생성기</a> Brightcove 학습 서비스 제공( <a href="https://codepen.io/rcrooks1969"> @rkooks1969</a> ) 에<a href="https://codepen.io">코드펜</a> .</span></p>
    <script async="async" src="https://static.codepen.io/assets/embed/ei.js"></script>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="Using_the_CodePen">코드펜 사용하기</h2>
      </summary>

      <p>다음은 위의 CodePen을 효과적으로 사용하기 위한 몇 가지 팁입니다.</p>

      <ul>
        <li>클릭하여 플레이어의 실제 표시를 전환합니다. <strong>결과</strong>단추.</li>
        <li>클릭<strong> HTML/CSS/JS</strong>버튼을 눌러 코드 유형 중 하나를 표시합니다.</li>
        <li>딸깍 하는 소리<strong> CodePen에서 편집</strong>이 CodePen을 자신의 계정으로 포크하려면 오른쪽 상단 모서리에 있습니다.</li>
        <li>이 샘플과 관련된 모든 코드 찾기<a href="https://github.com/BrightcoveLearning/18739-cms-api-sample-video-sitemap-generator"> GitHub 저장소</a> .</li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="Single_page">단일 페이지</h2>

    <p>위에서 언급했듯이 모든 비디오의 위치에 사용할 수 있는 HTML 페이지를 만들 수 있습니다. 앱은 페이지에서 사용해야 하는 비디오 ID를 정의하는 쿼리 매개변수를 사용하여 페이지의 URL을 변경합니다. 예를 들어 앱은 비디오 페이지의 위치에 대해 다음과 유사한 위치 URL을 포함하는 JSON을 생성합니다.</p>

    <pre class="line-numbers">
            <code class="language-json" translate="No">&lt;loc&gt;
                &lt;![CDATA[http://my.site.net/videos.html?videoId=5984663997001]]&gt;
            &lt;/loc&gt;
            ...
            &lt;loc&gt;
                &lt;![CDATA[http://my.site.net/videos.html?videoId=5982130568001]]&gt;
            &lt;/loc&gt;</code></pre>

    <p>비디오 ID만 변경됩니다.</p>

    <p>실제 HTML 페이지는<strong>비디오 ID</strong>그런 다음 URL 매개변수는 URL에서 얻은 비디오 ID를 사용하여 플레이어를 동적으로 생성합니다. 전체 HTML 페이지는 다음과 같이 나타납니다.</p>

    <pre class="line-numbers">
            <code class="language-html" translate="No">&lt;!doctype html&gt;
            &lt;html&gt;
            
            &lt;head&gt;
              &lt;meta charset="UTF-8"&gt;
              &lt;title&gt;Load Player Dynamically from URL Param&lt;/title&gt;
              &lt;!-- Page styles --&gt;
              &lt;style&gt;
                .video-js {
                  width: 640px;
                  height: 360px;
                }
              &lt;/style&gt;
            &lt;/head&gt;
            
            &lt;body&gt;
              &lt;div id="placeHolder"&gt;&lt;/div&gt;
              &lt;!-- custom script --&gt;
              &lt;script type="text/JavaScript"&gt;
                var myPlayer,
                  playerHTML,
                  playerData = {},
                  theURLParam = '',
                  // Set the account ID to your account
                  myAccountId = '1507807800001';
            
                 // Read URL param for video ID
                theURLParam = geturlparam('videoId');
            
                // Assign data for the player instantiation
                playerData = {
                  'accountId': myAccountId,
                  'playerId': 'default',
                  'videoId': theURLParam
                };
            
                // Call function that builds player
                addPlayer();
            
                /**
                 * gets value of a url param on current page url if exists
                 * @param {string} name the param you want the value of
                 * @return {string} result value of param if exists or null
                 */
                function geturlparam(name) {
                  var regex,
                    results;
                  name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                  regex = new RegExp("[\\?&amp;]" + name + "=([^&amp;#]*)");
                  results = regex.exec(location.search);
                  return results === null ? null : decodeURIComponent(results[1].replace(/\+/g, " "));
                };
            
                // Dynamically adds player to page
                function addPlayer() {
                  // Dynamically build the player video element
                  playerHTML = '&lt;video-js id=\"myPlayerID\" data-video-id=\"' + playerData.videoId + '\"  data-account=\"' + playerData.accountId + '\" data-player=\"' + playerData.playerId + '\" data-embed=\"default\" class=\"video-js\" controls&gt;&lt;/video-js&gt;';
                  // Inject the player code into the DOM
                  document.getElementById('placeHolder').innerHTML = playerHTML;
                  // Add and execute the player script tag
                  var s = document.createElement('script');
                  s.src = "https://players.brightcove.net/" + playerData.accountId + "/" + playerData.playerId + "_default/index.min.js";
                  document.body.appendChild(s);
                  s.onload = callback;
                }
            
                 // Initialize the player and start the video
                function callback() {
                  myPlayer = bc('myPlayerID');
                  // Can also use the following to assign a player instance to the variable if you choose not to use IDs for elements directly
                  // myPlayer = bc(document.getElementById('myPlayerID'));
                  myPlayer.on('loadedmetadata', function () {
                    // Mute the audio track, if there is one, so video will autoplay on button click
                    myPlayer.muted(true);
                    myPlayer.play();
                  })
                }
              &lt;/script&gt;
            &lt;/body&gt;
            
            &lt;/html&gt;</code></pre>

    <p>계좌번호를 입력하셔야 합니다. 코드에 대한 전체 설명은 다음을 참조하십시오. <a href="https://player.support.brightcove.com/code-samples/brightcove-player-sample-loading-player-dynamically.html">브라이트코브 플레이어 샘플: 동적으로 플레이어 로드</a>문서.</p>
  </section>

    <section class="bcls-section">
    <details>
      <summary>
        <h2 id="proxy">프록시 코드</h2>
      </summary>

      <p>이 페이지에서 고유한 버전의 샘플 앱을 빌드하려면 고유한 프록시를 만들고 호스팅해야 합니다. (Brightcove Learning Services에서 사용하는 프록시는 Brightcove 도메인의 요청만 수락합니다.) 우리가 사용하는 것과 매우 유사하지만 비 Brightcove 도메인의 요청을 차단하는 검사가 없는 샘플 프록시는 다음에서 찾을 수 있습니다. <a href="https://github.com/BrightcoveLearning/sample-proxy-apps">이 GitHub 저장소</a> . 또한 여기에서 사용에 대한 기본 지침과 프록시 주변에서 앱을 빌드하는 더 자세한 가이드를 찾을 수 있습니다. <a href="/getting-started/learning-guide-using-rest-apis.html"> REST API 사용</a> .</p>
    </details>
  </section>

</article>